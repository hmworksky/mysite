{% extends 'base.html' %}
{% block title %} Get List {% endblock %}
{% block content1 %}
		{% load static %}
		<link rel="stylesheet" href="{%static 'sign/new_admin/plugins/layui/css/layui.css'%}" media="all" />
		<link rel="stylesheet" href="{%static 'sign/new_admin/css/global.css'%}" media="all">
		<link rel="stylesheet" type="text/css" href="http://www.jq22.com/jquery/font-awesome.4.6.0.css">
		<link rel="stylesheet" href="{%static 'sign/new_admin/css/table.css'%}" />
		<script src="http://static.runoob.com/assets/vue/1.0.11/vue.min.js"></script>
 {% endblock %}
{% block content %}
		<div id ="translation">
			<p>
				please input some text
			</p>
		<input type ='text' name = 'before_trans' v-model="question">


			<p>
				{{ answer }}
			</p>

		</div>


	<script>
	var hm_new = new Vue({
		el:'#watch-example',
		data:{
			question:'',
			answer:'this is answer',
			trans_url:'http://127.0.0.1:8000/http/get_translation_result/',
			trans_form:{
					'msg':this.question
				}
			},
		watch:{
			question:function (newquestion,oldquestion) {
				this.answer = 'waiting for you to stop typing'
				this.debouncedGetAnswer()
			}
		},
		created:function () {
			this.debouncedGetAnswer = _.debounce(this.getAnswer,500)
		},
		methods:{
			getAnswer:function () {
				if(this.question.indexOf('?')=== -1){
					this.answer = 'Questions usually contain a question mark. ;-)'
					return
				}
				this.answer = 'thinking...'
				var vm = this
				axios.post(this.trans_url,this.trans_form)
					.then(function (response) {
						vm.answer = _.capitalize(response.data.answer)
					})
					.catch(function (error) {
						vm.answer = 'Error:'+error
					})
			}
		}


		})

	</script>
{% endblock %}